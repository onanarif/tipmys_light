{# templates/faculty/committee_form.html #}
{% extends 'inc/base.html' %}
{% load static %}

{% block title %}{% if form.instance.pk %}Komiteyi Düzenle{% else %}Yeni Komite{% endif %}{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">
      {% if form.instance.pk %}Komiteyi Düzenle{% else %}Yeni Komite{% endif %}
    </h2>
    <a class="btn btn-secondary" href="{% url 'faculty:committee_list' %}">Listeye Dön</a>
  </div>

  {% if form.non_field_errors %}
    <div class="alert alert-danger">{{ form.non_field_errors }}</div>
  {% endif %}

  <div class="card shadow-sm">
    <div class="card-body">
      <form method="post" novalidate>
        {% csrf_token %}
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Ad</label>
            {{ form.name }}
            {% if form.name.errors %}<div class="text-danger small">{{ form.name.errors }}</div>{% endif %}
          </div>
          <div class="col-md-6">
            <label class="form-label">Aşama</label>
            {{ form.phase }}
            {% if form.phase.errors %}<div class="text-danger small">{{ form.phase.errors }}</div>{% endif %}
          </div>
          <div class="col-md-6">
            <label class="form-label">Başkan</label>
            {{ form.chair }}
            {% if form.chair.errors %}<div class="text-danger small">{{ form.chair.errors }}</div>{% endif %}
          </div>
          <div class="col-md-3">
            <label class="form-label">Başlangıç Tarihi</label>
            {{ form.start_date }}
            {% if form.start_date.errors %}<div class="text-danger small">{{ form.start_date.errors }}</div>{% endif %}
          </div>
          <div class="col-md-3">
            <label class="form-label">Bitiş Tarihi</label>
            {{ form.end_date }}
            {% if form.end_date.errors %}<div class="text-danger small">{{ form.end_date.errors }}</div>{% endif %}
          </div>
        </div>

        <div class="mt-4 d-flex gap-2">
          <button type="submit" class="btn btn-primary">Kaydet</button>
          <a href="{% url 'faculty:committee_list' %}" class="btn btn-outline-secondary">Vazgeç</a>
        </div>
      </form>
    </div>
  </div>
</div>

{# Select2 (CDN) — required for the .select2 class to take effect #}
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.full.min.js"></script>

<script>
  (function () {
    function widthResolver(el) { return '100%'; }
    $('.select2').select2({
      theme: 'bootstrap-5',
      width: $(this).data('width') ? $(this).data('width') : widthResolver(this),
      placeholder: function(){ return $(this).data('placeholder') || 'Seçiniz'; },
      allowClear: true
    });
  })();
</script>
{% endblock %}

